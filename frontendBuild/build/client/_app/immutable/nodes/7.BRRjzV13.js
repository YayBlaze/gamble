import{f as j,a as I}from"../chunks/CMSUbqet.js";import{i as ee}from"../chunks/B95i4mGz.js";import{o as te}from"../chunks/DdWudD2G.js";import{p as se,f as oe,t as O,e as ae,j as r,m as g,s as n,g as i,r as c,i as l}from"../chunks/B4Cajtny.js";import{s as p}from"../chunks/h_Xj-A1A.js";import{i as re}from"../chunks/Bs56oDDG.js";import{e as ne,i as le}from"../chunks/C6-Cy7F4.js";import{s as E}from"../chunks/B6kgN4UT.js";import{e as D}from"../chunks/CLbQlhD4.js";import{u as L,m}from"../chunks/FuyYsi7F.js";var ie=j("<p> </p>"),ce=j('<div class="flex flex-col"><button class="text-[2rem] bg-[#bbb] dark:bg-[#4c4c4c] rounded-[15px] m-auto mt-[5%] w-[25%] border-">Admin Dashboard</button></div>'),de=j('<h1 class="pt-[2%] m-auto text-center text-[3rem]">Welcome <strong> </strong>, you currently have <strong> </strong></h1> <title>Home</title> <div id="links" class="bg-[#bbbbbb] dark:bg-[#3c3c3c] m-auto size-fit p-[2%] rounded-[15px] flex flex-col text-center text-[1.5rem]"><a>Slot Machine</a> <a>Blackjack</a>  <button type="button" class="text-(--red) bg-transparent border-none cursor-pointer hover:underline hover:decoration-wavy hover:decoration-(--blue)">Logout</button></div> <p class="m-auto mt-[3%] size-fit text-center text-[1.5rem]" id="msg"> </p> <button class="bg-[#bbbbbb] border-[2px solid #bbbbbb] dark:bg-[#4c4c4c] border-2 border-solid dark:border-[#4c4c4c] border-[#bbbbbb] transition duration-500 hover:bg-[#fbfbfb] dark:hover:bg-[#1c1c1c] m-auto size-fit p-[2%] rounded-[15px] flex flex-col text-center text-[1.5rem]"> </button> <div class="m-auto mt-[5%] size-fit p-[2%]] flex flex-col text-center text-[1.5rem]"><p class="text-[2rem]">Leaderboard</p> <!></div> <!>',1);function _e(N,A){se(A,!1);let h=g("person"),b=g(0),u=g("Collect $1000"),d=g(""),S=g([]);var z=!1;async function J(){let s="";const t=localStorage.getItem("sessionID");t!==null&&(s=t);let e=await fetch("https://cs.catlin.edu/node/2025/blaze/user",{headers:{sessionID:s}});if(e.status==403||e.status==401){let a=await e.json();m(`/?msg=${a.message}`)}e.status!=200&&console.log(await e.text);let o=await e.json();if(r(h,o.username),r(b,o.balance),e=await fetch("https://cs.catlin.edu/node/2025/blaze/baltop",{headers:{sessionID:s}}),e.status==403||e.status==401){let a=await e.json();m(`/?msg=${a.message}`)}e.status!=200&&console.log(await e.text),o=await e.json(),r(S,o)}async function P(){let s="";const t=localStorage.getItem("sessionID");t!==null&&(s=t);const e=JSON.stringify({balance:l(b),collect:!0,method:"collect"}),a=await fetch("https://cs.catlin.edu/node/2025/blaze/updateuser",{method:"POST",body:e,headers:{"Content-Type":"application/json",sessionID:s}});if(a.status==403||a.status==401){let Z=await a.json();m(`/?msg=${Z.message}`)}const T=await a.json();(a.status==403||a.status==401)&&m(`/?msg=${T.message}`),console.log(T.message)}function R(){localStorage.removeItem("sessionID"),m("/")}function x(s){let t=s/1e3;const e=t/60;return t=t%60,`${Math.round(e)}m & ${Math.round(t)}s`}var f=0;async function W(){let s="";const t=localStorage.getItem("sessionID");t!==null&&(s=t);let e=await fetch("https://cs.catlin.edu/node/2025/blaze/collect",{headers:{sessionID:s}});const o=await e.json(),a=document.getElementById("msg");e.ok?(r(b,l(b)+1e3),P(),r(d,o.message),a&&(a.style.color="green"),f=o.cooldown,r(u,`Cooldown: ${x(o.cooldown)}`)):((e.status==403||e.status==401)&&m(`/?msg=${o.message}`),r(d,o.message),a&&(a.style.color="#ee2c2c"),f=o.cooldown,r(u,`Cooldown: ${x(o.cooldown)}`))}function q(){f>0?(f-=1e3,r(u,`Cooldown: ${x(f)}`)):(z?r(d,""):r(d,"Consider enabling dark mode for a better viewing experience!"),r(u,"Collect $1000"))}setInterval(()=>{q()},1e3),te(()=>{J(),window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?(z=!0,r(d,"")):r(d,"Consider enabling dark mode for a better viewing experience!")}),ee();var C=de(),w=oe(C),_=n(i(w)),F=i(_,!0);c(_);var M=n(_,2),G=i(M);c(M),c(w);var $=n(w,4),B=i($);E(B,"href",`${L}/games/slots`);var H=n(B,2);E(H,"href",`${L}/games/blackjack`);var K=n(H,2);c($);var k=n($,2),Q=i(k,!0);c(k);var v=n(k,2),U=i(v,!0);c(v);var y=n(v,2),V=n(i(y),2);ne(V,1,()=>l(S),le,(s,t,e)=>{var o=ie(),a=i(o);c(o),O(()=>p(a,`${e+1}) ${l(t).username??""} = $${l(t).balance??""}`)),I(s,o)}),c(y);var X=n(y,2);{var Y=s=>{var t=ce(),e=i(t);c(t),D("click",e,()=>m("/admin")),I(s,t)};re(X,s=>{l(h)==="admin"&&s(Y)})}O(()=>{p(F,l(h)),p(G,`$${l(b)??""}`),p(Q,l(d)),p(U,l(u))}),D("click",K,R),D("click",v,W),I(N,C),ae()}export{_e as component};
