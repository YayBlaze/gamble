import{c as pe,a as Y,f as q}from"../chunks/Bv_MF2T9.js";import{i as we}from"../chunks/B7G9GnK2.js";import{o as ve}from"../chunks/mPMG23MA.js";import{h as E,p as ge,g as o,aB as _e,f as he,j as e,e as ye,t as oe,r as y,s as f,m as S,i as b}from"../chunks/CVFPUIRL.js";import{s as P}from"../chunks/BCmYL_-M.js";import{i as V}from"../chunks/DR-urfP7.js";import{r as Me}from"../chunks/DfhxyRTw.js";import{e as Se}from"../chunks/DokIQ6PN.js";import{b as De}from"../chunks/C-oXEmtp.js";import{e as je,i as ze}from"../chunks/ktKyTVEL.js";import{p as c}from"../chunks/DXrKycO6.js";import{m as ce}from"../chunks/w2IH8YCb.js";const fe=[...` 	
\r\fÂ \v\uFEFF`];function ke(s,i,n){var a=""+s;if(n){for(var r in n)if(n[r])a=a?a+" "+r:r;else if(a.length)for(var l=r.length,u=0;(u=a.indexOf(r,u))>=0;){var d=u+l;(u===0||fe.includes(a[u-1]))&&(d===a.length||fe.includes(a[d]))?a=(u===0?"":a.substring(0,u))+a.substring(d+1):u=d}}return a===""?null:a}function Ie(s,i){return s==null?null:String(s)}function Pe(s,i,n,a,r,l){var u=s.__className;if(E||u!==n||u===void 0){var d=ke(n,a,l);(!E||d!==s.getAttribute("class"))&&(d==null?s.removeAttribute("class"):s.className=d),s.__className=n}else if(l&&r!==l)for(var p in l){var h=!!l[p];(r==null||h!==!!r[p])&&s.classList.toggle(p,h)}return l}function me(s,i,n,a){var r=s.__style;if(E||r!==i){var l=Ie(i);(!E||l!==s.getAttribute("style"))&&(l==null?s.removeAttribute("style"):s.style.cssText=l),s.__style=i}return a}var Ae=q('<div class="confetti svelte-15ksp55"></div>'),Ce=q("<div></div>");function re(s,i){ge(i,!0);const n=c(i,"size",3,10),a=c(i,"x",19,()=>[-.5,.5]),r=c(i,"y",19,()=>[.25,1]),l=c(i,"duration",3,2e3),u=c(i,"infinite",3,!1),d=c(i,"delay",19,()=>[0,50]),p=c(i,"colorRange",19,()=>[0,360]),h=c(i,"colorArray",19,()=>[]),A=c(i,"amount",3,50),w=c(i,"iterationCount",3,1),j=c(i,"fallDistance",3,"100px"),z=c(i,"rounded",3,!1),C=c(i,"cone",3,!1),K=c(i,"noGravity",3,!1),Q=c(i,"xSpread",3,.15),U=c(i,"destroyOnComplete",3,!0),W=c(i,"disableForReducedMotion",3,!1);let N=_e(!1);ve(()=>{!U()||u()||typeof w()=="string"||setTimeout(()=>o(N,!0),(l()+d()[1])*w())});function m(_,x){return Math.random()*(x-_)+_}function X(){return h().length?h()[Math.round(Math.random()*(h().length-1))]:`hsl(${Math.round(m(p()[0],p()[1]))}, 75%, 50%)`}var I=pe(),F=he(I);{var Z=_=>{var x=Ce();let G;je(x,21,()=>({length:A()}),ze,(k,ne)=>{var B=Ae();oe(($,ee,te,O,ae,R,H,J,L,T,ie)=>me(B,`
        --color: ${$??""};
        --skew: ${ee??""}deg,${te??""}deg;
        --rotation-xyz: ${O??""}, ${ae??""}, ${R??""};
        --rotation-deg: ${H??""}deg;
        --translate-y-multiplier: ${J??""};
        --translate-x-multiplier: ${L??""};
        --scale: ${T??""};
        --transition-delay: ${ie??""}ms;
        --transition-duration: ${u()?`calc(${l()}ms * var(--scale))`:`${l()}ms`};`),[X,()=>m(-45,45),()=>m(-45,45),()=>m(-10,10),()=>m(-10,10),()=>m(-10,10),()=>m(0,360),()=>m(r()[0],r()[1]),()=>m(a()[0],a()[1]),()=>.1*m(2,10),()=>m(d()[0],d()[1])]),Y(k,B)}),y(x),oe(k=>{G=Pe(x,1,"confetti-holder svelte-15ksp55",null,G,k),me(x,`
    --fall-distance: ${j()??""};
    --size: ${n()??""}px;
    --x-spread: ${1-Q()};
    --transition-iteration-count: ${(u()?"infinite":w())??""};`)},[()=>({rounded:z(),cone:C(),"no-gravity":K(),"reduced-motion":W()})]),Y(_,x)};V(F,_=>{e(N)||_(Z)})}Y(s,I),ye()}var Ne=q(`<div style="
 position: fixed;
 top: -50px;
 left: 0;
 height: 100vh;
 width: 100vw;
 display: flex;
 justify-content: center;
 overflow: hidden;
 pointer-events: none;"><!></div>`),Be=q('<title>Slots</title> <!> <div id="title" class="m-auto text-center"><h1 class="text-[4rem] mb-0">Slot Machine</h1></div> <div class="m-auto w-[50%] h-fit flex flex-row justify-between"><!> <div id="machine" class="rounded-[15px] m-auto dark:bg-(--grey) bg-(--light-grey) w-[100%] h-fit p-[2%] flex flex-row justify-between"><div class="box svelte-yxrulg"> </div> <div class="box svelte-yxrulg"> </div> <div class="box svelte-yxrulg"> </div></div> <!></div> <h1 id="message" class="text-center m-auto text-[2rem] h-[3rem]"> </h1> <div id="spindiv" class="w-[50%] h-fit m-auto text-center flex flex-col"><button aria-label="Spin Button" class="m-auto size-[7rem] bg-red-500 transition duration-500 hover:bg-green-500 rounded-full border-0"></button> <span class="flex flex-row justify-center text-center w-[50%] m-auto"><p class="text-[2rem] m-2">Spin Price:</p> <input type="number" class="w-[25%] h-fit p-[1%] text-center bg-(--white) dark:bg-(--black) border-2 border-solid border-(--black) dark:border-(--white) rounded-[10px] text-[1.5rem]"/></span></div> <h1 id="balance" class="text-center m-auto text-[3rem]"> </h1> <div class="bg-(--light-grey) dark:bg-(--grey) size-fit m-auto text-center text-[1.5rem] p-[2%] rounded-[15px]">Prize Pool <br/> No Matches: -Spin Price <br/> <br/> <br/> </div>',1);function Ke(s,i){ge(i,!1);let n=S(0),a=S(""),r=S(20),l=2,u=5,d=S(10),p=S(700);window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&(o(d,100),o(p,e(p)*2));let h=S(!1),A=S(!1),w=S(7),j=S(7),z=S(7),C=!1;const K=t=>new Promise(v=>setTimeout(v,t));async function Q(){if(C==!0)return;let t=document.getElementById("message");if(e(r)<5){o(a,"You must bet at least $5!"),t&&(t.style.color="#ee2c2c"),o(r,5);return}if(C=!0,o(A,!1),o(h,!1),o(a,""),e(n)<e(r))o(a,"You don't have enough money! Lower your bet to play."),t&&(t.style.color="#ee2c2c");else{let v=0;for(let g=0;g<20;g++){await K(v),v+=5;let D=0,M=10;o(w,Math.floor(Math.random()*(M-D)+D)),o(j,Math.floor(Math.random()*(M-D)+D)),o(z,Math.floor(Math.random()*(M-D)+D))}e(w)==e(j)&&e(j)==e(z)?(e(w)==7?(o(n,e(n)+e(r)*e(d)),o(a,`You won $${e(r)*e(d)}!`)):(o(n,e(n)+e(r)*u),o(a,"You won $"+e(r)*u+"!")),o(A,!0),o(h,!0),t&&(t.style.color="green")):e(w)==e(j)||e(j)==e(z)||e(w)==e(z)?(o(n,e(n)+e(r)*l),o(a,"You won $"+e(r)*l+"!"),o(h,!0),t&&(t.style.color="green")):o(n,e(n)-e(r))}C=!1,W()}async function U(){let t="";const v=localStorage.getItem("sessionID");v!==null&&(t=v);const g=await fetch("https://cs.catlin.edu/node/2025/blaze/user",{headers:{sessionID:t}});(g.status==403||g.status==401)&&await g.json(),g.status!=200&&console.log(g.text());const D=await g.json();o(n,D.balance)}async function W(){let t="";const v=localStorage.getItem("sessionID");v!==null&&(t=v);const g=JSON.stringify({balance:e(n)}),M=await fetch("https://cs.catlin.edu/node/2025/blaze/updateuser",{method:"POST",body:g,headers:{"Content-Type":"application/json",sessionID:t}});if(M.status==403||M.status==401){let be=await M.json();ce(`/?msg=${be.message}`)}const de=await M.json();(M.status==403||M.status==401)&&ce(`/?msg=${de.message}`),console.log(de.message)}ve(()=>{U()}),we();var N=Be(),m=f(he(N),2);{var X=t=>{var v=Ne(),g=b(v);re(g,{x:[-5,5],y:[0,.1],delay:[0,3e3],duration:2500,get amount(){return e(p)},size:25,fallDistance:"100vh"}),y(v),Y(t,v)};V(m,t=>{e(A)&&t(X)})}var I=f(m,4),F=b(I);{var Z=t=>{re(t,{cone:!0,x:[-1,-2.5],y:[.25,.75],amount:100,size:20,delay:[0,1500],fallDistance:"100px"})};V(F,t=>{e(h)&&t(Z)})}var _=f(F,2),x=b(_),G=b(x,!0);y(x);var k=f(x,2),ne=b(k,!0);y(k);var B=f(k,2),$=b(B,!0);y(B),y(_);var ee=f(_,2);{var te=t=>{re(t,{cone:!0,x:[1,2.5],y:[.25,.75],amount:100,size:20,delay:[0,1500],fallDistance:"100px"})};V(ee,t=>{e(h)&&t(te)})}y(I);var O=f(I,2),ae=b(O,!0);y(O);var R=f(O,2),H=b(R),J=f(H,2),L=f(b(J),2);Me(L),y(J),y(R);var T=f(R,2),ie=b(T);y(T);var se=f(T,2),le=f(b(se),4);le.nodeValue=" 2 of a kind: +Spin Price x 2 ";var ue=f(le,2);ue.nodeValue=" 3 of a kind: +Spin Price x 5 ";var xe=f(ue,2);y(se),oe(()=>{P(G,e(w)),P(ne,e(j)),P($,e(z)),P(ae,e(a)),P(ie,`Balance = $${e(n)??""}`),P(xe,` 3 Sevens: +Spin Price x ${e(d)??""}`)}),Se("click",H,Q),De(L,()=>e(r),t=>o(r,t)),Y(s,N),ye()}export{Ke as component};
