import"../chunks/Bzak7iHL.js";import{i as me}from"../chunks/CJLlioOO.js";import{o as fe}from"../chunks/CnBhPSvY.js";import{p as ge,f as pe,s as n,a as he,t as ve,aH as t,b as be,c as ye,d as u,e as s,m as p,r as d}from"../chunks/D8DXxAzd.js";import{s as v}from"../chunks/BKyUyGuO.js";import{r as xe}from"../chunks/Db-KANGB.js";import{e as V}from"../chunks/0VhW8u6o.js";import{b as ke}from"../chunks/7L7bas56.js";import{b as R,m as U}from"../chunks/Bpg8nVh2.js";var we=pe('<title>Slots</title> <div class="m-auto text-center"><h1 class="text-[4rem] mb-0">Blackjack</h1></div> <h1 class="text-center m-auto text-[3rem]"> </h1> <h1 class="text-center m-auto text-[2rem]" id="msg"> </h1> <div id="play-area" class="bg-(--light-grey) dark:bg-(--grey) text-center rounded-[15px] w-[50%] h-fit m-auto p-[2%] grid grid-cols-2 svelte-18ku462"><p class="text-[3rem] svelte-18ku462">Player Cards</p> <p class="text-[3rem] svelte-18ku462">Dealer Cards</p> <p class="svelte-18ku462"> </p> <p class="svelte-18ku462"> </p> <p class="svelte-18ku462"> </p> <p class="svelte-18ku462"> </p></div> <div class="text-center text-[1.5rem] m-auto mt-[2%] bg-(--light-grey) dark:bg-(--grey) w-[50%] h-fit p-[1%] rounded-[15px]"> <input type="number" class="w-[20%] p-[1%] m-auto text-center bg-(--white) dark:bg-(--black) border-2 border-solid border-(--black) dark:border-(--white) rounded-[5px] text-[1.5rem]"/></div> <div class="text-center w-[50%] h-fit m-auto p-[2%] flex justify-between"><button class="bg-green-500 p-[2%] w-[20%] text-(--black) rounded-[5px] text-[1.5rem] hover:bg-(--white) dark:hover:bg-(--black) transition duration-500 hover:text-green-500 border-2 border-solid border-green-500">Hit</button> <button class="bg-yellow-500 p-[2%] w-[30%] text-(--black) rounded-[5px] text-[1.5rem] hover:bg-(--white) dark:hover:bg-(--black) transition duration-500 hover:text-yellow-500 border-2 border-solid border-yellow-500">New Game</button> <button class="bg-red-500 p-[2%] w-[20%] text-(--black) rounded-[5px] text-[1.5rem] hover:bg-(--white) dark:hover:bg-(--black) transition duration-500 hover:text-red-500 border-2 border-solid border-red-500">Stand</button></div>',1);function $e(q,z){ge(z,!1);var m=p(0),b=p(100),B=100,c=p(""),h=!1,k=p("Start a new game!"),w=p("Start a new game!"),r=p(0),o=p(0),l=[],f=[];const F=["♠","♥","♦","♣"],X=["A","2","3","4","5","6","7","8","9","10","J","Q","K"];var i=p([]);function Z(){s(i,[]);for(const e of F)for(const a of X)t(i).push(`${a}${e}`)}function H(e){const a=e.slice(0,e.length-1);return a=="?"?0:a==="A"?11:["K","Q","J"].includes(a)?10:parseInt(a,10)}function ee(){for(let e=0;e<f.length;e++)f[e].startsWith("A")&&t(o)>21&&s(o,t(o)-10);for(let e=0;e<l.length;e++)l[e].startsWith("A")&&t(r)>21&&s(r,t(r)-10)}function te(){if(h){s(c,"You are currently playing a game!");const e=document.getElementById("msg");e&&(e.style.color="#ee2c2c");return}else if(t(m)<t(b)){s(c,"You don't have enough money! Lower your bet to play.");const e=document.getElementById("msg");e&&(e.style.color="#ee2c2c");return}else if(t(b)<100){s(c,"You must bet at least $100!");const e=document.getElementById("msg");e&&(e.style.color="#ee2c2c"),s(b,100);return}B=t(b),s(m,t(m)-B),h=!0,s(c,""),Z(),f=[],l=[];for(let e=0;e<2;e++)f.push(t(i).splice(Math.floor(Math.random()*t(i).length),1)[0]);l.push(t(i).splice(Math.floor(Math.random()*t(i).length),1)[0]),l.push("??"),y(),_(!1)}function y(){s(o,0),s(r,0),s(w,""),s(k,"");for(let e=0;e<f.length;e++){let a=H(f[e]);s(o,t(o)+a),s(w,t(w)+(f[e]+" "))}for(let e=0;e<l.length;e++){let a=H(l[e]);s(r,t(r)+a),s(k,t(k)+(l[e]+" "))}ee()}function _(e){t(o)>21?I("Bust"):t(r)==21&&l.length==2?I("Dealer Blackjack"):t(o)==21&&l.length==2?E("Blackjack"):t(o)==21&&t(r)==21?O():e&&(t(r)==t(o)?O():t(r)>21?E("Dealer Bust"):t(r)>t(o)?I("Closest to 21"):t(o)>t(r)?E("Closest to 21"):I("this shouldn't even happen but you lose ig"))}function se(){if(!h){const e=document.getElementById("msg");e&&(e.style.color="#ee2c2c"),s(c,"You need to start a new game first!");return}f.push(t(i).splice(Math.floor(Math.random()*t(i).length),1)[0]),y(),t(o)==21&&J(),_(!1)}function J(){if(!h){const e=document.getElementById("msg");e&&(e.style.color="#ee2c2c"),s(c,"You need to start a new game first!");return}for(l.splice(l.indexOf("??"),2);t(r)<17;)l.push(t(i).splice(Math.floor(Math.random()*t(i).length),1)[0]),y(),_(!1);_(!0)}function E(e){y(),s(m,t(m)+B*2),s(c,"You Win: "+e);const a=document.getElementById("msg");a&&(a.style.color="green"),h=!1,D()}function I(e){y(),s(c,"Dealer Wins: "+e);const a=document.getElementById("msg");a&&(a.style.color="#ee2c2c"),h=!1,D()}function O(){s(c,"Push: Money back");const e=document.getElementById("msg");e&&(e.style.color="#ffb347"),h=!1,D()}async function ae(){let e="";const a=localStorage.getItem("sessionID");a!==null&&(e=a);const g=await fetch(R+"/user",{headers:{sessionID:e}});if(g.status==403||g.status==401){let x=await g.json();U(`/?msg=${x.message}`)}g.status!=200&&console.log(g.text());const W=await g.json();s(m,W.balance)}async function D(){let e="";const a=localStorage.getItem("sessionID");a!==null&&(e=a);const g=JSON.stringify({balance:t(m),collect:!1,method:"blackjack"}),W={"Content-Type":"application/json",sessionID:e},x=await fetch(R+"/updateuser",{method:"POST",body:g,headers:W});if(x.status==403||x.status==401){let de=await x.json();U(`/?msg=${de.message}`)}}fe(()=>{ae()}),me();var P=we(),M=n(he(P),4),re=u(M);d(M);var S=n(M,2),oe=u(S,!0);d(S);var j=n(S,2),C=n(u(j),4),le=u(C,!0);d(C);var $=n(C,2),ne=u($,!0);d($);var Y=n($,2),ie=u(Y,!0);d(Y);var K=n(Y,2),ce=u(K,!0);d(K),d(j);var A=n(j,2),L=u(A),N=n(L);xe(N),d(A);var Q=n(A,2),T=u(Q),G=n(T,2),ue=n(G,2);d(Q),ve(()=>{v(re,`Balance = $${t(m)??""}`),v(oe,t(c)),v(le,t(w)),v(ne,t(k)),v(ie,t(o)),v(ce,t(r)),v(L,`Cards Left: ${t(i).length??""} | Bet: `)}),ke(N,()=>t(b),e=>s(b,e)),V("click",T,se),V("click",G,te),V("click",ue,J),be(q,P),ye()}export{$e as component};
