import{f as E,a as M}from"../chunks/C6EFBxso.js";import"../chunks/BBB0d4XK.js";import{o as X}from"../chunks/RfSOChAB.js";import{p as Y,i as Z,j as B,k as tt,s as r,m as g,l as n,o as c,r as i,g as l}from"../chunks/Gy7_sNZd.js";import{s as f}from"../chunks/B3Q0I3Mm.js";import{e as et,i as st}from"../chunks/C3ZQ4yW9.js";import{s as H,u as T,m}from"../chunks/CSGXa3j2.js";import{e as O}from"../chunks/BZjFAepe.js";import{i as ot}from"../chunks/D2ejAJ-1.js";var at=E("<p> </p>"),rt=E('<h1 class="pt-[2%] m-auto text-center text-[3rem]">Welcome <strong> </strong>, you currently have <strong> </strong></h1> <title>Home</title> <div id="links" class="bg-[#bbbbbb] dark:bg-[#3c3c3c] m-auto size-fit p-[2%] dark:rounded-[15px] flex flex-col text-center text-[1.5rem]"><a>Slot Machine</a> <a>Blackjack</a>  <button type="button" class="text-(--red) bg-transparent border-none cursor-pointer hover:underline hover:decoration-wavy hover:decoration-(--blue)">Logout</button></div> <p class="m-auto mt-[3%] size-fit text-center text-[1.5rem]" id="msg"> </p> <button class="bg-[#bbbbbb] border-[2px solid #bbbbbb] dark:bg-[#4c4c4c] border-2 border-solid dark:border-[#4c4c4c] border-[#bbbbbb] transition duration-500 hover:bg-[#fbfbfb] dark:hover:bg-[#1c1c1c] m-auto size-fit p-[2%] dark:rounded-[15px] flex flex-col text-center text-[1.5rem]"> </button> <div class="m-auto mt-[5%] size-fit p-[2%]] flex flex-col text-center text-[1.5rem]"><p class="text-[2rem]">Leaderboard</p> <!></div>',1);function ft(L,N){Y(N,!1);let _=g("person"),d=g(0),u=g("Collect $100"),p=g(""),I=g([]);async function J(){let a="";const o=localStorage.getItem("sessionID");o!==null&&(a=o);let t=await fetch("https://cs.catlin.edu/node/2025/blaze/user",{headers:{sessionID:a}});if(t.status==403||t.status==401){let s=await t.json();m(`/?msg=${s.message}`)}t.status!=200&&console.log(await t.text);let e=await t.json();if(r(_,e.username),r(d,e.balance),t=await fetch("https://cs.catlin.edu/node/2025/blaze/baltop",{headers:{sessionID:a}}),t.status==403||t.status==401){let s=await t.json();m(`/?msg=${s.message}`)}t.status!=200&&console.log(await t.text),e=await t.json(),r(I,e)}async function P(){let a="";const o=localStorage.getItem("sessionID");o!==null&&(a=o);const t=JSON.stringify({balance:l(d)}),s=await fetch("https://cs.catlin.edu/node/2025/blaze/updateuser",{method:"POST",body:t,headers:{"Content-Type":"application/json",sessionID:a}});if(s.status==403||s.status==401){let V=await s.json();m(`/?msg=${V.message}`)}const C=await s.json();(s.status==403||s.status==401)&&m(`/?msg=${C.message}`),console.log(C.message)}function R(){localStorage.removeItem("sessionID"),m("/")}function h(a){let o=a/1e3;const t=o/60;return o=o%60,`${Math.round(t)}m & ${Math.round(o)}s`}var b=0;async function W(){let a="";const o=localStorage.getItem("sessionID");o!==null&&(a=o);let t=await fetch("https://cs.catlin.edu/node/2025/blaze/collect",{headers:{sessionID:a}});const e=await t.json(),s=document.getElementById("msg");t.ok?(r(d,l(d)+100),P(),r(p,e.message),s&&(s.style.color="green"),b=e.cooldown,r(u,`Cooldown: ${h(e.cooldown)}`)):((t.status==403||t.status==401)&&m(`/?msg=${e.message}`),r(p,e.message),s&&(s.style.color="#ee2c2c"),b=e.cooldown,r(u,`Cooldown: ${h(e.cooldown)}`))}function q(){b>0?(b-=1e3,r(u,`Cooldown: ${h(b)}`)):(r(p,""),r(u,"Collect $100"))}setInterval(()=>{q()},1e3),X(()=>{J()}),ot();var k=rt(),x=Z(k),w=n(c(x)),A=c(w,!0);i(w);var D=n(w,2),F=c(D);i(D),i(x);var $=n(x,4),j=c($);H(j,"href",`${T}/games/slots`);var S=n(j,2);H(S,"href",`${T}/games/blackjack`);var G=n(S,2);i($);var y=n($,2),K=c(y,!0);i(y);var v=n(y,2),Q=c(v,!0);i(v);var z=n(v,2),U=n(c(z),2);et(U,1,()=>l(I),st,(a,o,t)=>{var e=at(),s=c(e);i(e),B(()=>f(s,`${t+1}) ${l(o).username??""} = $${l(o).balance??""}`)),M(a,e)}),i(z),B(()=>{f(A,l(_)),f(F,`$${l(d)??""}`),f(K,l(p)),f(Q,l(u))}),O("click",G,R),O("click",v,W),M(L,k),tt()}export{ft as component};
