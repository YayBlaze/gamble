import"../chunks/Bzak7iHL.js";import{i as we}from"../chunks/CJLlioOO.js";import{o as ge}from"../chunks/CnBhPSvY.js";import{E as H,p as he,e as o,aV as _e,aG as Me,a as xe,g as e,b as Y,c as ye,f as U,t as oe,r as x,s as f,m as D,d as b}from"../chunks/D8DXxAzd.js";import{s as P}from"../chunks/BKyUyGuO.js";import{i as L}from"../chunks/D2XiG5t3.js";import{r as Se}from"../chunks/Db-KANGB.js";import{e as De}from"../chunks/0VhW8u6o.js";import{b as ke}from"../chunks/7L7bas56.js";import{e as je,i as ze}from"../chunks/BS0-grPP.js";import{p as c}from"../chunks/dlws_A8B.js";import{b as ce,m as fe}from"../chunks/Bpg8nVh2.js";const me=[...` 	
\r\fÂ \v\uFEFF`];function Ie(s,r,n){var a=""+s;if(n){for(var i in n)if(n[i])a=a?a+" "+i:i;else if(a.length)for(var l=i.length,u=0;(u=a.indexOf(i,u))>=0;){var d=u+l;(u===0||me.includes(a[u-1]))&&(d===a.length||me.includes(a[d]))?a=(u===0?"":a.substring(0,u))+a.substring(d+1):u=d}}return a===""?null:a}function Pe(s,r){return s==null?null:String(s)}function Ae(s,r,n,a,i,l){var u=s.__className;if(H||u!==n||u===void 0){var d=Ie(n,a,l);(!H||d!==s.getAttribute("class"))&&(d==null?s.removeAttribute("class"):s.className=d),s.__className=n}else if(l&&i!==l)for(var p in l){var h=!!l[p];(i==null||h!==!!i[p])&&s.classList.toggle(p,h)}return l}function ve(s,r,n,a){var i=s.__style;if(H||i!==r){var l=Pe(r);(!H||l!==s.getAttribute("style"))&&(l==null?s.removeAttribute("style"):s.style.cssText=l),s.__style=r}return a}var Ce=U('<div class="confetti svelte-15ksp55"></div>'),Ne=U("<div></div>");function ie(s,r){he(r,!0);const n=c(r,"size",3,10),a=c(r,"x",19,()=>[-.5,.5]),i=c(r,"y",19,()=>[.25,1]),l=c(r,"duration",3,2e3),u=c(r,"infinite",3,!1),d=c(r,"delay",19,()=>[0,50]),p=c(r,"colorRange",19,()=>[0,360]),h=c(r,"colorArray",19,()=>[]),A=c(r,"amount",3,50),w=c(r,"iterationCount",3,1),k=c(r,"fallDistance",3,"100px"),j=c(r,"rounded",3,!1),C=c(r,"cone",3,!1),q=c(r,"noGravity",3,!1),K=c(r,"xSpread",3,.15),Q=c(r,"destroyOnComplete",3,!0),W=c(r,"disableForReducedMotion",3,!1);let N=_e(!1);ge(()=>{!Q()||u()||typeof w()=="string"||setTimeout(()=>o(N,!0),(l()+d()[1])*w())});function m(_,y){return Math.random()*(y-_)+_}function X(){return h().length?h()[Math.round(Math.random()*(h().length-1))]:`hsl(${Math.round(m(p()[0],p()[1]))}, 75%, 50%)`}var I=Me(),G=xe(I);{var Z=_=>{var y=Ne();let V;je(y,21,()=>({length:A()}),ze,(z,ne)=>{var B=Ce();oe(($,ee,te,O,ae,R,E,F,J,T,re)=>ve(B,`
        --color: ${$??""};
        --skew: ${ee??""}deg,${te??""}deg;
        --rotation-xyz: ${O??""}, ${ae??""}, ${R??""};
        --rotation-deg: ${E??""}deg;
        --translate-y-multiplier: ${F??""};
        --translate-x-multiplier: ${J??""};
        --scale: ${T??""};
        --transition-delay: ${re??""}ms;
        --transition-duration: ${u()?`calc(${l()}ms * var(--scale))`:`${l()}ms`};`),[X,()=>m(-45,45),()=>m(-45,45),()=>m(-10,10),()=>m(-10,10),()=>m(-10,10),()=>m(0,360),()=>m(i()[0],i()[1]),()=>m(a()[0],a()[1]),()=>.1*m(2,10),()=>m(d()[0],d()[1])]),Y(z,B)}),x(y),oe(z=>{V=Ae(y,1,"confetti-holder svelte-15ksp55",null,V,z),ve(y,`
    --fall-distance: ${k()??""};
    --size: ${n()??""}px;
    --x-spread: ${1-K()};
    --transition-iteration-count: ${(u()?"infinite":w())??""};`)},[()=>({rounded:j(),cone:C(),"no-gravity":q(),"reduced-motion":W()})]),Y(_,y)};L(G,_=>{e(N)||_(Z)})}Y(s,I),ye()}var Be=U(`<div style="
 position: fixed;
 top: -50px;
 left: 0;
 height: 100vh;
 width: 100vw;
 display: flex;
 justify-content: center;
 overflow: hidden;
 pointer-events: none;"><!></div>`),Oe=U('<title>Slots</title> <!> <div id="title" class="m-auto text-center"><h1 class="text-[4rem] mb-0">Slot Machine</h1></div> <div class="m-auto w-[50%] h-fit flex flex-row justify-between"><!> <div id="machine" class="rounded-[15px] m-auto dark:bg-(--grey) bg-(--light-grey) w-[100%] h-fit p-[2%] flex flex-row justify-between"><div class="box svelte-yxrulg"> </div> <div class="box svelte-yxrulg"> </div> <div class="box svelte-yxrulg"> </div></div> <!></div> <h1 id="message" class="text-center m-auto text-[2rem] h-[3rem]"> </h1> <div id="spindiv" class="w-[50%] h-fit m-auto text-center flex flex-col"><button aria-label="Spin Button" class="m-auto size-[7rem] bg-red-500 transition duration-500 hover:bg-green-500 rounded-full border-0"></button> <span class="flex flex-row justify-center text-center w-[50%] m-auto"><p class="text-[2rem] m-2">Spin Price:</p> <input type="number" class="w-[25%] h-fit p-[1%] text-center bg-(--white) dark:bg-(--black) border-2 border-solid border-(--black) dark:border-(--white) rounded-[10px] text-[1.5rem]"/></span></div> <h1 id="balance" class="text-center m-auto text-[3rem]"> </h1> <div class="bg-(--light-grey) dark:bg-(--grey) size-fit m-auto text-center text-[1.5rem] p-[2%] rounded-[15px]">Prize Pool <br/> No Matches: -Spin Price <br/> <br/> <br/> </div>',1);function Ke(s,r){he(r,!1);let n=D(0),a=D(""),i=D(20),l=2,u=5,d=D(10),p=D(700);window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&(o(d,100),o(p,e(p)*2));let h=D(!1),A=D(!1),w=D(7),k=D(7),j=D(7),C=!1;const q=t=>new Promise(v=>setTimeout(v,t));async function K(){if(C==!0)return;let t=document.getElementById("message");if(e(i)<5){o(a,"You must bet at least $5!"),t&&(t.style.color="#ee2c2c"),o(i,5);return}if(C=!0,o(A,!1),o(h,!1),o(a,""),e(n)<e(i))o(a,"You don't have enough money! Lower your bet to play."),t&&(t.style.color="#ee2c2c");else{let v=0;for(let g=0;g<20;g++){await q(v),v+=5;let M=0,S=10;o(w,Math.floor(Math.random()*(S-M)+M)),o(k,Math.floor(Math.random()*(S-M)+M)),o(j,Math.floor(Math.random()*(S-M)+M))}e(w)==e(k)&&e(k)==e(j)?(e(w)==7?(o(n,e(n)+e(i)*e(d)),o(a,`You won $${e(i)*e(d)}!`)):(o(n,e(n)+e(i)*u),o(a,"You won $"+e(i)*u+"!")),o(A,!0),o(h,!0),t&&(t.style.color="green")):e(w)==e(k)||e(k)==e(j)||e(w)==e(j)?(o(n,e(n)+e(i)*l),o(a,"You won $"+e(i)*l+"!"),o(h,!0),t&&(t.style.color="green")):o(n,e(n)-e(i))}C=!1,W()}async function Q(){let t="";const v=localStorage.getItem("sessionID");v!==null&&(t=v);const g=await fetch(ce+"/user",{headers:{sessionID:t}});(g.status==403||g.status==401)&&await g.json(),g.status!=200&&console.log(g.text());const M=await g.json();o(n,M.balance)}async function W(){let t="";const v=localStorage.getItem("sessionID");v!==null&&(t=v);const g=JSON.stringify({balance:e(n),collect:!1,method:"slots"}),M={"Content-Type":"application/json",sessionID:t},S=await fetch(ce+"/updateuser",{method:"POST",body:g,headers:M});if(S.status==403||S.status==401){let pe=await S.json();fe(`/?msg=${pe.message}`)}const de=await S.json();(S.status==403||S.status==401)&&fe(`/?msg=${de.message}`),console.log(de.message)}ge(()=>{Q()}),we();var N=Oe(),m=f(xe(N),2);{var X=t=>{var v=Be(),g=b(v);ie(g,{x:[-5,5],y:[0,.1],delay:[0,3e3],duration:2500,get amount(){return e(p)},size:25,fallDistance:"100vh"}),x(v),Y(t,v)};L(m,t=>{e(A)&&t(X)})}var I=f(m,4),G=b(I);{var Z=t=>{ie(t,{cone:!0,x:[-1,-2.5],y:[.25,.75],amount:100,size:20,delay:[0,1500],fallDistance:"100px"})};L(G,t=>{e(h)&&t(Z)})}var _=f(G,2),y=b(_),V=b(y,!0);x(y);var z=f(y,2),ne=b(z,!0);x(z);var B=f(z,2),$=b(B,!0);x(B),x(_);var ee=f(_,2);{var te=t=>{ie(t,{cone:!0,x:[1,2.5],y:[.25,.75],amount:100,size:20,delay:[0,1500],fallDistance:"100px"})};L(ee,t=>{e(h)&&t(te)})}x(I);var O=f(I,2),ae=b(O,!0);x(O);var R=f(O,2),E=b(R),F=f(E,2),J=f(b(F),2);Se(J),x(F),x(R);var T=f(R,2),re=b(T);x(T);var se=f(T,2),le=f(b(se),4);le.nodeValue=" 2 of a kind: +Spin Price x 2 ";var ue=f(le,2);ue.nodeValue=" 3 of a kind: +Spin Price x 5 ";var be=f(ue,2);x(se),oe(()=>{P(V,e(w)),P(ne,e(k)),P($,e(j)),P(ae,e(a)),P(re,`Balance = $${e(n)??""}`),P(be,` 3 Sevens: +Spin Price x ${e(d)??""}`)}),De("click",E,K),ke(J,()=>e(i),t=>o(i,t)),Y(s,N),ye()}export{Ke as component};
