import{f as ue,a as de}from"../chunks/C6EFBxso.js";import"../chunks/BBB0d4XK.js";import{o as me}from"../chunks/RfSOChAB.js";import{p as fe,l as n,i as pe,j as ge,a5 as t,k as be,s,m as g,o as u,r as d}from"../chunks/Gy7_sNZd.js";import{s as h}from"../chunks/B3Q0I3Mm.js";import{m as T,r as ve}from"../chunks/CSGXa3j2.js";import{e as A}from"../chunks/BZjFAepe.js";import{b as he}from"../chunks/1T0YsbOg.js";import{i as xe}from"../chunks/D2ejAJ-1.js";var ye=ue('<title>Slots</title> <div class="m-auto text-center"><h1 class="text-[4rem] mb-0">Blackjack</h1></div> <h1 class="text-center m-auto text-[3rem]"> </h1> <h1 class="text-center m-auto text-[2rem]" id="msg"> </h1> <div id="play-area" class="bg-[#bbbbb] dark:bg-[#3c3c3c] text-center dark:rounded-[15px] w-[50%] h-fit m-auto p-[2%] grid grid-cols-2 svelte-18ku462"><p class="text-[3rem] svelte-18ku462">Player Cards</p> <p class="text-[3rem] svelte-18ku462">Dealer Cards</p> <p class="svelte-18ku462"> </p> <p class="svelte-18ku462"> </p> <p class="svelte-18ku462"> </p> <p class="svelte-18ku462"> </p></div> <div class="text-center text-[1.5rem] m-auto mt-[2%] bg-[#bbbb] dark:bg-[#3c3c3c] w-[50%] h-fit p-[1%] dark:rounded-[15px]"> <input type="number" class="w-[20%] p-[1%] m-auto text-center bg-(--black) border-2 border-solid border-(--white) dark:rounded-[5px] text-(--white) text-[1.5rem]"/></div> <div class="text-center w-[50%] h-fit m-auto p-[2%] flex justify-between"><button class="bg-green-500 p-[2%] w-[20%] text-(--black) dark:rounded-[5px] text-[1.5rem] hover:bg-(--black) transition duration-500 hover:text-green-500 border-2 border-solid border-green-500">Hit</button> <button class="bg-yellow-500 p-[2%] w-[30%] text-(--black) dark:rounded-[5px] text-[1.5rem] hover:bg-(--black) transition duration-500 hover:text-yellow-500 border-2 border-solid border-yellow-500">New Game</button> <button class="bg-red-500 p-[2%] w-[20%] text-(--black) dark:rounded-[5px] text-[1.5rem] hover:bg-(--black) transition duration-500 hover:text-red-500 border-2 border-solid border-red-500">Stand</button></div>',1);function je(G,R){fe(R,!1);var m=g(1e3),b=g(50),c=g(""),v=!1,k=g("Start a new game!"),w=g("Start a new game!"),r=g(0),o=g(0),l=[],f=[];const q=["♠","♥","♦","♣"],F=["A","2","3","4","5","6","7","8","9","10","J","Q","K"];var i=g([]);function U(){s(i,[]);for(const e of q)for(const a of F)t(i).push(`${a}${e}`)}function W(e){const a=e.slice(0,e.length-1);return a=="?"?0:a==="A"?11:["K","Q","J"].includes(a)?10:parseInt(a,10)}function X(){for(let e=0;e<f.length;e++)f[e].startsWith("A")&&t(o)>21&&s(o,t(o)-10);for(let e=0;e<l.length;e++)l[e].startsWith("A")&&t(r)>21&&s(r,t(r)-10)}function V(){if(v){s(c,"You are currently playing a game!");const e=document.getElementById("msg");e&&(e.style.color="#ee2c2c");return}else if(t(m)<t(b)){s(c,"You don't have enough money! Lower your bet to play.");const e=document.getElementById("msg");e&&(e.style.color="#ee2c2c");return}else if(t(b)<50){s(c,"You must bet at least $50!");const e=document.getElementById("msg");e&&(e.style.color="#ee2c2c"),s(b,50);return}v=!0,s(c,""),U(),f=[],l=[];for(let e=0;e<2;e++)f.push(t(i).splice(Math.floor(Math.random()*t(i).length),1)[0]);l.push(t(i).splice(Math.floor(Math.random()*t(i).length),1)[0]),l.push("??"),x(),_(!1)}function x(){s(o,0),s(r,0),s(w,""),s(k,"");for(let e=0;e<f.length;e++){let a=W(f[e]);s(o,t(o)+a),s(w,t(w)+(f[e]+" "))}for(let e=0;e<l.length;e++){let a=W(l[e]);s(r,t(r)+a),s(k,t(k)+(l[e]+" "))}X()}function _(e){t(o)>21?B("Bust"):t(o)==21?I("Blackjack"):t(r)==21?B("Dealer Blackjack"):t(o)==21&&t(r)==21?H():e&&(t(r)>21?I("Dealer Bust"):t(o)>t(r)?I("Closest to 21"):t(r)>t(o)?B("Closest to 21"):t(r)==t(o)&&H())}function Z(){if(!v){const e=document.getElementById("msg");e&&(e.style.color="#ee2c2c"),s(c,"You need to start a new game first!");return}f.push(t(i).splice(Math.floor(Math.random()*t(i).length),1)[0]),x(),_(!1)}function ee(){if(!v){const e=document.getElementById("msg");e&&(e.style.color="#ee2c2c"),s(c,"You need to start a new game first!");return}for(l.splice(l.indexOf("??"),2);t(r)<17;)l.push(t(i).splice(Math.floor(Math.random()*t(i).length),1)[0]),x(),_(!1);_(!0)}function I(e){x(),s(m,t(m)+t(b)*2),s(c,"You Win: "+e);const a=document.getElementById("msg");a&&(a.style.color="green"),v=!1,E()}function B(e){x(),s(m,t(m)-t(b)),s(c,"Dealer Wins: "+e);const a=document.getElementById("msg");a&&(a.style.color="#ee2c2c"),v=!1,E()}function H(){s(c,"Push: Money back");const e=document.getElementById("msg");e&&(e.style.color="#ffb347"),v=!1,E()}V();async function te(){let e="";const a=localStorage.getItem("sessionID");a!==null&&(e=a);const p=await fetch("https://cs.catlin.edu/node/2025/blaze/user",{headers:{sessionID:e}});if(p.status==403||p.status==401){let y=await p.json();T(`/?msg=${y.message}`)}p.status!=200&&console.log(p.text());const Q=await p.json();s(m,Q.balance)}async function E(){let e="";const a=localStorage.getItem("sessionID");a!==null&&(e=a);const p=JSON.stringify({balance:t(m)}),y=await fetch("https://cs.catlin.edu/node/2025/blaze/updateuser",{method:"POST",body:p,headers:{"Content-Type":"application/json",sessionID:e}});if(y.status==403||y.status==401){let ce=await y.json();T(`/?msg=${ce.message}`)}}me(()=>{te()}),xe();var J=ye(),D=n(pe(J),4),se=u(D);d(D);var M=n(D,2),ae=u(M,!0);d(M);var S=n(M,2),j=n(u(S),4),re=u(j,!0);d(j);var C=n(j,2),oe=u(C,!0);d(C);var $=n(C,2),ne=u($,!0);d($);var O=n($,2),le=u(O,!0);d(O),d(S);var Y=n(S,2),P=u(Y),z=n(P);ve(z),d(Y);var K=n(Y,2),L=u(K),N=n(L,2),ie=n(N,2);d(K),ge(()=>{h(se,`Balance = $${t(m)??""}`),h(ae,t(c)),h(re,t(w)),h(oe,t(k)),h(ne,t(o)),h(le,t(r)),h(P,`Cards Left: ${t(i).length??""} | Bet: `)}),he(z,()=>t(b),e=>s(b,e)),A("click",L,Z),A("click",N,V),A("click",ie,ee),de(G,J),be()}export{je as component};
