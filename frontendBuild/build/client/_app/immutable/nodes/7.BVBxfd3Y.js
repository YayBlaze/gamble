import"../chunks/Bzak7iHL.js";import{i as te}from"../chunks/CJLlioOO.js";import{o as oe}from"../chunks/CnBhPSvY.js";import{p as se,f as j,a as ae,t as E,b as D,c as re,e as r,s as n,d as l,m as g,r as c,g as i}from"../chunks/D8DXxAzd.js";import{s as p}from"../chunks/BKyUyGuO.js";import{i as ne}from"../chunks/D2XiG5t3.js";import{e as ie,i as le}from"../chunks/BS0-grPP.js";import{s as L}from"../chunks/Db-KANGB.js";import{e as S}from"../chunks/0VhW8u6o.js";import{u as N,b as x,m}from"../chunks/Bpg8nVh2.js";var ce=j("<p> </p>"),de=j('<div class="flex flex-col"><button class="text-[2rem] bg-[#bbb] dark:bg-[#4c4c4c] rounded-[15px] m-auto mt-[5%] w-[25%] border-">Admin Dashboard</button></div>'),me=j('<h1 class="pt-[2%] m-auto text-center text-[3rem]">Welcome <strong> </strong>, you currently have <strong> </strong></h1> <title>Home</title> <div id="links" class="bg-[#bbbbbb] dark:bg-[#3c3c3c] m-auto size-fit p-[2%] rounded-[15px] flex flex-col text-center text-[1.5rem]"><a>Slot Machine</a> <a>Blackjack</a>  <button type="button" class="text-(--red) bg-transparent border-none cursor-pointer hover:underline hover:decoration-wavy hover:decoration-(--blue)">Logout</button></div> <p class="m-auto mt-[3%] size-fit text-center text-[1.5rem]" id="msg"> </p> <button class="bg-[#bbbbbb] border-[2px solid #bbbbbb] dark:bg-[#4c4c4c] border-2 border-solid dark:border-[#4c4c4c] border-[#bbbbbb] transition duration-500 hover:bg-[#fbfbfb] dark:hover:bg-[#1c1c1c] m-auto size-fit p-[2%] rounded-[15px] flex flex-col text-center text-[1.5rem]"> </button> <div class="m-auto mt-[5%] size-fit p-[2%]] flex flex-col text-center text-[1.5rem]"><p class="text-[2rem]">Leaderboard</p> <!></div> <!>',1);function _e(A,J){se(J,!1);let h=g("person"),b=g(0),u=g("Collect $1000"),d=g(""),C=g([]);var M=!1;async function P(){let s="";const t=localStorage.getItem("sessionID");t!==null&&(s=t);let e=await fetch(x+"/user",{headers:{sessionID:s}});if(e.status==403||e.status==401){let a=await e.json();m(`/?msg=${a.message}`)}e.ok||console.log(await e.text());let o=await e.json();if(r(h,o.username),r(b,o.balance),e=await fetch(x+"/baltop",{headers:{sessionID:s}}),e.status==403||e.status==401){let a=await e.json();m(`/?msg=${a.message}`)}e.ok||console.log(await e.text()),o=await e.json(),r(C,o)}async function R(){let s="";const t=localStorage.getItem("sessionID");t!==null&&(s=t);const e=JSON.stringify({balance:i(b),collect:!0,method:"collect"}),o={"Content-Type":"application/json",sessionID:s},a=await fetch(x+"/updateuser",{method:"POST",body:e,headers:o});if(a.status==403||a.status==401){let ee=await a.json();m(`/?msg=${ee.message}`)}const O=await a.json();(a.status==403||a.status==401)&&m(`/?msg=${O.message}`),console.log(O.message)}function U(){localStorage.removeItem("sessionID"),m("/")}function w(s){let t=s/1e3;const e=t/60;return t=t%60,`${Math.round(e)}m & ${Math.round(t)}s`}var f=0;async function W(){let s="";const t=localStorage.getItem("sessionID");t!==null&&(s=t);let e=await fetch(x+"/collect",{headers:{sessionID:s}});const o=await e.json(),a=document.getElementById("msg");e.ok?(r(b,i(b)+1e3),R(),r(d,o.message),a&&(a.style.color="green"),f=o.cooldown,r(u,`Cooldown: ${w(o.cooldown)}`)):((e.status==403||e.status==401)&&m(`/?msg=${o.message}`),r(d,o.message),a&&(a.style.color="#ee2c2c"),f=o.cooldown,r(u,`Cooldown: ${w(o.cooldown)}`))}function q(){f>0?(f-=1e3,r(u,`Cooldown: ${w(f)}`)):(M?r(d,""):r(d,"Consider enabling dark mode for a better viewing experience!"),r(u,"Collect $1000"))}setInterval(()=>{q()},1e3),oe(()=>{P(),window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?(M=!0,r(d,"")):r(d,"Consider enabling dark mode for a better viewing experience!")}),te();var z=me(),k=ae(z),_=n(l(k)),F=l(_,!0);c(_);var B=n(_,2),G=l(B);c(B),c(k);var $=n(k,4),T=l($),H=n(T,2),K=n(H,2);c($);var y=n($,2),Q=l(y,!0);c(y);var v=n(y,2),V=l(v,!0);c(v);var I=n(v,2),X=n(l(I),2);ie(X,1,()=>i(C),le,(s,t,e)=>{var o=ce(),a=l(o);c(o),E(()=>p(a,`${e+1}) ${i(t).username??""} = $${i(t).balance??""}`)),D(s,o)}),c(I);var Y=n(I,2);{var Z=s=>{var t=de(),e=l(t);c(t),S("click",e,()=>m("/admin")),D(s,t)};ne(Y,s=>{i(h)==="admin"&&s(Z)})}E(()=>{p(F,i(h)),p(G,`$${i(b)??""}`),L(T,"href",`${N}/games/slots`),L(H,"href",`${N}/games/blackjack`),p(Q,i(d)),p(V,i(u))}),S("click",K,U),S("click",v,W),D(A,z),re()}export{_e as component};
